<h1>ここから薬局の地図を検索</h1>

<div id="map"></div>

<script>
  var map;
  var markers = [];

  if( navigator.geolocation ){
    alert( "あなたの端末では、現在位置を取得することができます。" ) ;

    //現在地取得機能
    navigator.geolocation.getCurrentPosition(
      function get_position(position){
        //緯度経度を定義し位置情報をgoogle_map引き渡す
        var current_lat = position.coords.latitude;
        var current_lng = position.coords.longitude;
        var current_positoin = new google.maps.LatLng(current_lat, current_lng) ;
        map = new google.maps.Map(document.getElementById('map'), {
          center: current_positoin,
          zoom: 15
        });

        var positions = [
          {title:'自宅', location: {lat: 35.710388, lng: 139.906582}},
          {title:'セントラル薬局本八幡店', location: {lat: 35.723428,lng: 139.927206}},

        ];

        var bounds = new google.maps.LatLngBounds();

        for (var i = 0; i < positions.length; i++){
          var position = positions[i].location;
          var title = positions[i].title;
          var marker = new google.maps.Marker({
            map: map,
            position: position,
            title: title,
            animation: google.maps.Animation.DROP,
            id: i //配列の順番をidにする
          });
          markers.push(marker); //生成されたマーカーを保存
          bounds.extend(markers[i].position); //全マーカーが収まるように地図の表示範囲を指定
        }
        map.fitBounds(bounds);

      },
      function(error){
        alert("エラー");
      }

    );
  }else{
    // 現在位置を取得できない場合の処理
    alert( "あなたの端末では、現在位置を取得できません。" ) ;
  }
</script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD758_1X2aD76zlJuMYn8yWTOIkyVWC6Fo&callback=get_position"type="text/javascript"></script>
